<!DOCTYPE html>
<!--resetBoardDatabase.php-->
<!--This file is for resetting the board database.-->
<html>
<head>
</head>
<body>
<?php
$id = $_REQUEST["id"];// receive the parameter n from the JavaScript code

$updateComplete = FALSE;
$updatAttemptTime = 1;
// This loop is to guarantee that if the database visit fails,
// it will be revisit again, until it's successful
while($updateComplete == FALSE && $updatAttemptTime < 1000) {
	$mysqli = new mysqli("localhost", "id302411_jlw", "ap.PG.00", "id302411_gogame");
	// The 4th parameter is the name of the database. It is important to specify
	// the name of the database because there might be several databases under on username.

	if ($mysqli->connect_errno) {
   	 echo "Failed";
	} else {
		 echo "DB for update successful";
	}


		$res = $mysqli->query("SELECT * FROM Board WHERE PositionID='".$id."'");
		if ($res->num_rows > 0){
    		while($row = $res->fetch_assoc()) {
       		echo $row['State'];
       		$updateComplete = TRUE;
    		}
		}else{
		echo "No" . $updatAttemptTime;
		$updatAttemptTime += 1;
	}
	$mysqli->close();
}





?>

</body>
</html>
